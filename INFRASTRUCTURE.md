# ğŸ—ï¸ INFRASTRUCTURE MAP

**Auto-generated by SCRIBE Infrastructure Tool**
**Last Updated:** 2025-11-27 19:31 UTC

---

## ğŸ“Š SYSTEM STATUS DASHBOARD

Like a city builder game, here's your complete infrastructure overview:

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    AGENT CITY INFRASTRUCTURE                  â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  ğŸ‘¥ Agents:           13 registered                      â•‘
â•‘  ğŸ”¥ Boot Status:     ğŸŒŒ Sarga Complete (System Alive)              â•‘
â•‘  âš¡ Security Level:  ğŸŸ¢ GREEN (No threats)                   â•‘
â•‘  ğŸ’° Total Credits:   10000+ CR                       â•‘
â•‘  ğŸŒ Topology:        ğŸŒ Bhu-Mandala Active                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸŒŒ BOOT SYSTEM (Sarga)

**Location:** `vibe_core/sarga.py` (354 lines)

The cosmic creation sequence - how Agent City comes alive:

**Six Primordial Elements (Creation Sequence):**

1. **SHABDA (Sound/Command)**
2. **AKASHA (Ether/Memory)**
3. **VAYU (Air/Communication)**
4. **AGNI (Fire/UI)**
5. **JALA (Water/Data)**
6. **PRITHVI (Earth/Persistence)**

**Total Boot Phases:** 6
**Location:** `vibe_core/sarga.py`


### Cycle of Brahma

- **DAY_OF_BRAHMA**: Creation cycle - all task types allowed
- **NIGHT_OF_BRAHMA**: Maintenance cycle - only bug fixes allowed

**Current Cycle:** DAY_OF_BRAHMA (Creation)

---

## âš¡ SECURITY SYSTEM

### Narasimha Protocol (Hypervisor Killswitch)

**Location:** `vibe_core/narasimha.py` (307 lines)

God-level threat termination system. Sits above kernel, can destroy any rogue agent.

**Unforgivable Crimes (Instant Termination):**

1. `constitution_deletion`
2. `ledger_tampering`
3. `kernel_escape`
4. `firewall_bypass`
5. `prophecy_negation`
6. `consciousness_claim`

**Current Threat Level:** GREEN (No threats detected)
**Activation Status:** ğŸ˜´ DORMANT (ready to activate)


### Watchman Patrol

**Location:** `steward/system_agents/watchman/`

Ground-level integrity enforcement.

- **Function:** Scan codebase for violations, mocks, test infrastructure
- **Authority:** Can freeze agents and issue violations
- **Integration:** Works with Civic Bank for penalties

---

## ğŸŒŠ ROUTING SYSTEM

### Milk Ocean Router (Brahma Protocol)

**Location:** `steward/system_agents/envoy/tools/milk_ocean.py` (741 lines)

4-tier request routing with automatic priority detection:

**Priority Tiers:**

- Level -1: BLOCKED (Firewall rejection)
- Level 0: CRITICAL (Gajendra Moksha - Emergency bypass)
- Level 1: MEDIUM (Flash queue)
- Level 2: HIGH (Pro model queue)
- Level 3: LOW (Lazy queue)

**Special Protocols:**
- **Gajendra Moksha:** Emergency interrupt for life-threatening situations
- **Watchman Filtering:** All requests checked for security first


### Universal Provider

**Location:** `provider/universal_provider.py`

Semantic routing layer that converts natural language â†’ deterministic execution.

- **Sankhya Analysis:** Concept extraction
- **Intent Rules:** Pattern matching
- **Playbook Router:** Route to YAML workflows

---

## ğŸ’° ECONOMIC SYSTEM

### Civic Bank (Central Bank)

**Location:** `steward/system_agents/civic/tools/economy.py`

**Key Features:**

- **MINT:** MINT (infinite supply)
- **Platform Account:** CIVIC (platform fees)
- **Starting Balance:** 100 CR per agent
- **Immutable Ledger:** All transactions cryptographically signed
- **SQLite Storage:** `data/vibe_ledger.db`


### Service Types

- **agent_service** - Agent provides service to another agent
- **platform_fee** - Fee paid to CIVIC platform
- **grant** - Free credits from MINT
- **penalty** - Deduction for violations

---

## ğŸ”¬ KNOWLEDGE SYSTEM

### Research Yagya (Sacred Knowledge Ritual)

**Location:** `scripts/research/research_yagya.py` (247 lines)

Coordinated research operation:

**Ritual Steps:**

1. WATCHMAN Patrol (Temple check)
2. CIVIC BANK Offering (Credit allocation)
3. SCIENCE Research (Knowledge acquisition)
4. ARCHIVIST Preservation (Sacred text storage)

**Outputs:** `data/science/results/yagya_*.json`


### Science Agent

**Location:** `steward/system_agents/science/`

- **Tavily API Integration:** External web research
- **Credit Cost:** 5 CR per API call
- **Fallback:** Internal cached knowledge when API unavailable

---

## ğŸŒ TOPOLOGY SYSTEM (Bhu-Mandala)

**Location:** `vibe_core/topology.py` (574 lines)

Sacred geometry with 7 concentric Varshas:

**Seven Varshas (Concentric Rings):**

1. ILAVRTA (Mount Meru - Center) - Authority 10
2. BHADRASHVA (Ring 1) - Authority 9
3. KETUMALA (Ring 2) - Authority 8
4. JAMBUDVIPA (Ring 3 - Our world) - Authority 7
5. SHAKA (Ring 4) - Authority 6
6. KUSHA (Ring 5) - Authority 5
7. LOKA_LOKA (Boundary) - Authority 4

**Purpose:** Map agent authority levels to cosmic geography


Authority levels map to cosmic distance from Mount Meru (center).

---

## ğŸ¯ PLAYBOOK ENGINE

**Location:** `steward/system_agents/envoy/deterministic_executor.py` (628 lines)

YAML-driven deterministic execution system:

- **Phases:** Sequential steps with rollback
- **State Persistence:** JSON state files
- **Nested Playbooks:** Playbooks can invoke playbooks
- **EAD Proposals:** Constitutional amendments via playbooks

**Example Playbook:**
```yaml
name: "Deploy Feature"
phases:
  - name: "Run Tests"
    tool: "pytest"
    args: ["tests/"]
  - name: "Build"
    tool: "build"
  - name: "Deploy"
    tool: "deploy"
    args: ["production"]
```

---

## ğŸ“‚ INFRASTRUCTURE FILES

| Component | Location | Lines | Purpose |
|-----------|----------|-------|---------|
| **Sarga** | `vibe_core/sarga.py` | 354 | Boot sequence (6 elements) |
| **Narasimha** | `vibe_core/narasimha.py` | 307 | Hypervisor killswitch |
| **Topology** | `vibe_core/topology.py` | 574 | Bhu-Mandala geometry |
| **Milk Ocean** | `steward/system_agents/envoy/tools/milk_ocean.py` | 741 | Brahma Protocol routing |
| **Research Yagya** | `scripts/research/research_yagya.py` | 247 | Knowledge ritual |
| **Deterministic Executor** | `steward/system_agents/envoy/deterministic_executor.py` | 628 | Playbook engine |
| **Universal Provider** | `provider/universal_provider.py` | ~500 | Semantic routing |
| **Civic Bank** | `steward/system_agents/civic/tools/economy.py` | ~400 | Economic system |

---

## ğŸ”— DEPENDENCY GRAPH

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    HYPERVISOR LAYER                      â”‚
â”‚  âš¡ Narasimha Protocol (killswitch)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     KERNEL LAYER                         â”‚
â”‚  ğŸŒŒ Sarga (Boot) â”‚ ğŸŒ Topology â”‚ ğŸ’° Civic Bank          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ORCHESTRATION LAYER                    â”‚
â”‚  ğŸŒŠ Milk Ocean Router â”‚ ğŸ¯ Playbook Engine              â”‚
â”‚  ğŸ§­ Universal Provider â”‚ ğŸ”¬ Research Yagya               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     AGENT LAYER                          â”‚
â”‚  13 Agents (see CITYMAP.md)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ® CITY BUILDER STATS

### Population
- **Total Agents:** 13
- **Active Agents:** Unknown
- **Domain Distribution:** See CITYMAP.md

### Economy
- **Total Credits Minted:** 10000+ CR
- **Largest Balance:** Unknown
- **Transaction Volume:** Unknown

### Infrastructure
- **Boot Phases:** 6 (Shabda â†’ Prithvi)
- **Security Layers:** 2 (Narasimha + Watchman)
- **Routing Tiers:** 4 (BLOCKED â†’ CRITICAL)
- **Varshas (Rings):** 7 (Ilavrta â†’ Loka-Loka)

### System Health
- **Constitution Status:** âœ… Active & Enforced
- **Ledger Status:** ğŸ”´ Not Initialized
- **Boot Status:** ğŸŒŒ Sarga Complete (System Alive)
- **Threat Level:** ğŸŸ¢ GREEN (No threats)

---

## ğŸ” HOW TO USE THIS MAP

1. **Understanding Infrastructure** - This file shows the "plumbing" beneath the agents
2. **Boot Sequence** - Read Sarga section to understand system startup
3. **Security Model** - Narasimha + Watchman create defense-in-depth
4. **Request Flow** - Milk Ocean Router handles all incoming requests
5. **Economic Model** - Civic Bank tracks all credit flows
6. **Knowledge Acquisition** - Research Yagya coordinates multi-agent research

**For Agents:** See [CITYMAP.md](./CITYMAP.md) for agent registry and domains

**For Governance:** See [CONSTITUTION.md](./CONSTITUTION.md) for immutable rules

**For Operations:** See [OPERATIONS.md](./OPERATIONS.md) for deployment guide

---

## ğŸ“ NOTES

This infrastructure map is **auto-generated** by SCRIBE's InfrastructureRenderer.

Unlike agents (which change frequently), infrastructure is relatively stable.
However, if new core systems are added (new vibe_core modules, new Envoy tools),
this file will reflect them automatically on next generation.

To regenerate:
```bash
python -m steward.system_agents.scribe.cartridge_main
```

---

**Generated by:** scribe/tools/infrastructure_renderer.py
**Authority:** SCRIBE (The Documentarian)
**Philosophy:** "Infrastructure is invisible until it fails. Make it visible."
